\documentclass[12pt,a4paper,titlepage]{article}
\usepackage[utf8]{inputenc}
% \usepackage[francais]{babel}

\usepackage[left=1.5cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage[colorlinks]{hyperref}
\usepackage{graphicx}

% --- CSL part
\usepackage{natbib}
\input{includes/pvstex}
\usepackage{includes/makebnf}


\usepackage[space]{grffile} % Celui-là je sais plus à quoi il sert...

% --- Partie code
\usepackage{listings}
\lstset{language=Java} % Changer eventuellement le nom du langage
\newcommand{\codeline}[1]{\texttt{#1}}

% --- Parti math. (app.)
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{algorithm}[theorem]{Algorithm}
\newtheorem{remark}[theorem]{Remark}

% Mathematic abbreviations

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Esp}{\mathbb{E}}
%\newcommand{\E}{\mathbb{E}} % Si tu l'utilise beaucoup
\newcommand{\Prob}{\mathbb{P}}
%\newcommand{\P}{\mathbb{P}} % Si tu l'utilise beaucoup



\title{
\vspace{-3cm}
\normalsize
\begin{tabular}{p{15cm}}
ÉCOLE POLYTECHNIQUE \\
PROMOTION X2011 \\
Férey Gaspard
\end{tabular}
\vspace{3cm}
\begin{center}
\includegraphics[height=3cm]{pictures/logo.png}
\end{center}
\vspace{1cm}
\large
\begin{center}
RAPPORT DE STAGE D'OPTION SCIENTIFIQUE\\
\vspace{1cm}
{\Huge Titre}\\
\vspace{1cm}
NON CONFIDENTIEL
\end{center}
\vspace{3cm}
\normalsize
\begin{tabular}{p{6cm} p{10cm}}
Option :                  & INFORMATIQUE \\
Champ de l'option :       & Math-Informatique \\
Directeur de l'option :   & Olivier Bournez \\
Directeur de stage :      & Olivier Bournez \\
Dates du stage :          & 7 avril - 22 aout 2014\\
Nom et adresse de l'organisme :  & SRI International \\
                          & Computer Science Laboratory (CSL) \\
                          & 333 Ravenswood Avenue \\
                          & Menlo Park, CA 94025-3493 \\
                          & United States
\end{tabular}
}

\begin{document}

\maketitle
\tableofcontents
\newpage

\section{Introduction}

\section{PVS}


\section{Translating PVS to C}


\section{Parsing and typechecking PVS}
These two task we leave to PVS native parser and typechecker.

The parser generates objects representing the expressions of the theory.

We only convert a subset of PVS.
This subset is defined by a subset of expression objects we can translate.
The objective is, of course, to be able to translate the maximum of (if not all) PVS expression objects.



\section{PVS Syntax}
We describe here the syntax of PVS and the objects system used to represent them in Lisp. Some slots of the classes are voluntarily omitted. For a full description of PVS parser representation, refer to \cite{PVS:api}.

\input{includes/bnf-expr}
\input{includes/bnf-expr-aux}




\section{Types}
A PVS theory can be typechecked using the emacs interface \codeline{M-x typecheck} or with Lisp function \codeline{(tc name-theory)}. This first runs the PVS parser on the code and generates CLOS objects to represent it. Then, the PVS typechecker is run on this internal representation of the theory and tries to give a type to all expressions generating TCC when needed.\\

Here we describe how PVS types are represented in Lisp. The syntax of PVS we allow

\input{includes/bnf-type-expr}

\begin{class}{type-expr}{abstract}{\classhln{syntax}}
{}
\end{class}
\begin{class}{type-name}{}{\classhln{type-expr} \classhln{name}}
{\slotidx{adt} & }
\end{class}
\begin{class}{subtype}{}{\classhln{type-expr}}
{\slotidx{supertype} & \\
 \slotidx{predicate} & }
\end{class}
\begin{class}{funtype}{}{\classhln{type-expr}}
{\slotidx{domain} & \\
 \slotidx{range} & }
\end{class}
\begin{class}{tupletype}{}{\classhln{type-expr}}
{\slotidx{types} & }
\end{class}
\begin{class}{recordtype}{}{\classhln{type-expr}}
{\slotidx{fields} & }
\end{class}


\section{Translating types}
PVS types:\\
boolean, number, number\_field, real, 
rational, integer, $A \rightarrow B$, restricted types
$\text{below}(10) := \{ x:\text{int} | 0 \leq x < 10 \} $)  \\
enum
datatype

C types:\\
[unsigned] char, int, long, double
boolean
arrays
strings
enum
struct
and others: short int, float, union, size\_t, ...


We can only translate a subset of all PVS types.
What's missing ?

\subsection{Translating PVS syntax}


We can only translate a subset of PVS syntax.
What's missing ?



\subsection{Difficulties}
if-expr
update-expr




\section{Other works at SRI}

Discovering PVS :
Translating Coq proofs to PVS
PVS library for basic linear algebra

Robin project, HACMS \\
Contest week-end 14-15 June \\
Summer School \\
Parsing Lisp code -> generate HTML architecture file\\
Correcting translator PVS to SMT-LIB




\bibliographystyle{plain}
\bibliography{report}


\end{document}
