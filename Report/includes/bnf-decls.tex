\begin{bnf}

\hproduction{lib-decl}{LibDecl}
{\hlink{Ids}\ \lit{:} \lit{LIBRARY} \opt{\lit{=}} \hlink{String}}

\hproduction{mod-decl}{TheoryDecl}
{\hlink{Ids}\ \lit{:} \lit{THEORY} \lit{=} \hlink{TheoryDeclName}}

\hproduction{type-decl}{TypeDecl}
{\hlink{Id}\ \opt{\{\lit{,} \hlink{Ids}\} \choice \hlink{Bindings}} \lit{:} \\[-0.1in]
& & \quad \{\lit{TYPE} \choice \lit{NONEMPTY\_TYPE} \choice \lit{TYPE+}\} \\[-0.1in]
& & \quad \opt{\brc{\lit{=} \choice \lit{FROM}} \hlink{TypeExpr} \opt{\lit{CONTAINING} \hlink{Expr}}}}

\hproduction{var-decl}{VarDecl}
{\hlink{IdOps}\ \lit{:} \lit{VAR} \hlink{TypeExpr}}

\hproduction{const-decl}{ConstDecl}
{\hlink{IdOp}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice \ite{\hlink{Bindings}}} \lit{:} \hlink{TypeExpr} \opt{\lit{=} \hlink{Expr}}}

\hproduction{def-decl}{RecursiveDecl}
{\hlink{IdOp}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice \ite{\hlink{Bindings}}} \lit{:} \lit{RECURSIVE} \\[-0.1in]
& & \quad \hlink{TypeExpr} \lit{=} \hlink{Expr} \lit{MEASURE} \hlink{Expr} \opt{\lit{BY} \hlink{Expr}}}

\hproduction{macro-decl}{MacroDecl}
{\hlink{IdOp}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice
\ite{\hlink{Bindings}}} \lit{:} \lit{MACRO} \\[-0.1in]
& & \quad \hlink{TypeExpr} \lit{=} \hlink{Expr}}

\hproduction{inductive-decl}{InductiveDecl}
{\hlink{IdOp}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice \ite{\hlink{Bindings}}} \lit{:} \lit{INDUCTIVE}  \\[-0.1in]
& & \quad \hlink{TypeExpr} \lit{=} \hlink{Expr}}

\hproduction{coinductive-decl}{CoInductiveDecl}
{\hlink{IdOp}\ \opt{\{\lit{,} \hlink{IdOps} \} \choice \ite{\hlink{Bindings}}} \lit{:} \lit{COINDUCTIVE}  \\[-0.1in]
& & \quad \hlink{TypeExpr} \lit{=} \hlink{Expr}}

\hproduction{formula-decl}{FormulaDecl}
{\hlink{Ids}\ \lit{:} \hlink{FormulaName} \hlink{Expr}}

\hproduction{judgement}{Judgement}
{\hlink{SubtypeJudgement} \choice \hlink{ConstantJudgement}}

\hproduction{subtype-judgement}{SubtypeJudgement}
{\opt{\hlink{IdOp} \lit{:}} \lit{JUDGEMENT} \ites{\hlink{TypeExpr}}{,} \lit{SUBTYPE\_OF} \hlink{TypeExpr}}

\hproduction{name-judgement}{ConstantJudgement}
{\opt{\hlink{IdOp} \lit{:}} \lit{JUDGEMENT} \ites{\hlink{ConstantReference}}{,}  \\[-0.1in]
& & \quad \lit{HAS\_TYPE} \hlink{TypeExpr}}

\production{ConstantReference}
{\hlink{Name} \rep{\hlink{Bindings}}}

\hproduction{conversion-decl}{Conversion}
{\brc{\lit{CONVERSION} \choice \lit{CONVERSION+} \choice
\lit{CONVERSION-}} \ites{\hlink{Expr}}{,}}

\hproduction{auto-rewrite-decl}{AutoRewriteDecl}
{\brc{\lit{AUTO\_REWRITE} \choice \lit{AUTO\_REWRITE+} \choice
\lit{AUTO\_REWRITE-}} \\[-0.1in]
& & \quad \ites{\hlink{RewriteName}}{,}}

\hproduction{rewrite-name}{RewriteName}
{\hlink{Name} \opt{\lit{!} \opt{\lit{!}}} \opt{\lit{:}
\brc{\hlink{TypeExpr} \choice \hlink{FormulaName}}}}

\production{Bindings}
{\lit{(} \ites{\hlink{Binding}}{,} \lit{)}}

\production{Binding}
{\hlink{TypedId} \choice \{ \lit{(} \hlink{TypedIds} \lit{)} \} }

\production{TypedIds}
{\hlink{IdOps} \opt{\lit{:} \hlink{TypeExpr}} \opt{\lit{|} \hlink{Expr}}}

\hproduction{binding}{TypedId}
{\hlink{IdOp} \opt{\lit{:} \hlink{TypeExpr}} \opt{\lit{|} \hlink{Expr}}}

\end{bnf}
